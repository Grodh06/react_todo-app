(this["webpackJsonpreact_add-todo-form"]=this["webpackJsonpreact_add-todo-form"]||[]).push([[0],{21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var c=n(14),r=n.n(c),a=n(5),o=n(0),s=n.n(o),i=n(2),l=n(11),u=n(8),d=n(3),j=n(6),f=n.n(j);var b="https://mate.academy/students-api",p=function(){var e=Object(u.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b).concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/todos"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(f.a.mark((function e(t,n){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/todos/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/todos/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=s.a.createContext("local"),v=n(7),g=n.n(v),y=(n(21),n(1)),w=function(e){var t=e.storage;return Object(y.jsxs)("div",{className:"storage",children:[Object(y.jsx)(a.b,{className:g()("storage__link",{selected:"/local"===t}),to:"local",children:"Local"}),Object(y.jsx)(a.b,{className:g()("storage__link",{selected:"/server"===t}),to:"server",children:"Server"})]})},N=function(e){var t=e.addTodo,n=Object(o.useState)(""),c=Object(d.a)(n,2),r=c[0],a=c[1];return Object(y.jsx)("form",{onSubmit:function(e){e.preventDefault(),r.trim().length>0&&(t(r),a(""))},children:Object(y.jsx)("input",{type:"text","data-cy":"createTodo",className:"new-todo",placeholder:"What needs to be done?",value:r,onChange:function(e){return a(e.target.value)}})})},k=n(13),S=n(15);function E(e,t){var n=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(d.a)(e,2),c=t[0],r=t[1];null===r?n.delete(c):Array.isArray(r)?(n.delete(c),r.forEach((function(e){n.append(c,e)}))):n.set(c,r)})),n.toString()}var T=["children","params"],C=function(e){var t=e.children,n=e.params,c=Object(S.a)(e,T),r=Object(a.c)(),o=Object(d.a)(r,1)[0];return Object(y.jsx)(a.b,Object(k.a)(Object(k.a)({to:{search:E(o,n)}},c),{},{children:t}))},I=function(){var e=Object(a.c)(),t=Object(d.a)(e,1)[0].get("completed");return Object(y.jsxs)("ul",{className:"filters",children:[Object(y.jsx)("li",{children:Object(y.jsx)(C,{params:{completed:null},className:g()({selected:!t}),children:"All"})}),Object(y.jsx)("li",{children:Object(y.jsx)(C,{params:{completed:"active"},className:g()({selected:"active"===t}),children:"Active"})}),Object(y.jsx)("li",{children:Object(y.jsx)(C,{params:{completed:"completed"},className:g()({selected:"completed"===t}),children:"Completed"})})]})},A=function(e){var t=e.todo,n=e.updateTodo,c=e.clear,r=Object(o.useState)(t.title),a=Object(d.a)(r,2),s=a[0],i=a[1],l=Object(o.useState)(s),u=Object(d.a)(l,2),j=u[0],f=u[1],b=Object(o.useState)(!1),p=Object(d.a)(b,2),h=p[0],O=p[1],m=function(){0===s.trim().length?c(t.id):(f(s),n(t.id,s))};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("li",{className:g()({completed:t.completed,editing:h}),id:"test",children:[Object(y.jsxs)("div",{className:"view",children:[Object(y.jsx)("input",{type:"checkbox",className:"toggle",id:"toggle-view",checked:t.completed,onChange:function(){n(t.id,!t.completed)}}),Object(y.jsx)("label",{onDoubleClick:function(){return O(!h)},children:j}),Object(y.jsx)("button",{"aria-label":"#toggle-view",type:"button",className:"destroy","data-cy":"deleteTodo",onClick:function(){return c(t.id)}})]}),Object(y.jsx)("input",{type:"text",className:"edit",value:s,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){return"Enter"===(t=e.key)&&(m(),O(!1)),void("Escape"===t&&(i(j),O(!1)));var t},onBlur:function(e){e.preventDefault(),m()}})]})})},J=function(e){var t=e.visibleTodos,n=e.updateTodo,c=e.clear;return Object(y.jsx)("ul",{className:"todo-list","data-cy":"todoList",children:t.map((function(e){return Object(y.jsx)(A,{todo:e,updateTodo:n,clear:c},e.id)}))})},_=function(){var e=Object(i.f)().pathname,t=Object(o.useState)(e.slice(1)||"local"),n=Object(d.a)(t,2),c=n[0],r=n[1],s=function(e,t){var n=Object(o.useState)((function(){if(void 0===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return t}})),c=Object(d.a)(n,2),r=c[0],a=c[1];return[r,function(t){var n=t instanceof Function?t(r):t;a(n),"undefined"!==typeof window&&window.localStorage.setItem(e,JSON.stringify(t))}]}("todos",[]),j=Object(d.a)(s,2),b=j[0],v=j[1],g=Object(o.useState)([]),k=Object(d.a)(g,2),S=k[0],E=k[1],T=Object(a.c)(),C=Object(d.a)(T,1)[0].get("completed"),A=function(){var e=Object(u.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("/todos").then(E);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var e=setInterval(A,1e3);return function(){return clearInterval(e)}}),[]),Object(o.useEffect)((function(){A()}),[]),Object(o.useEffect)((function(){r(e)}),[e]);var _="/server"===c?S:b,D=Object(l.a)(_).filter((function(e){switch(C){case"active":return!1===e.completed;case"completed":return!0===e.completed;default:return!0}})),P=function(e){"/local"===c?function(e){v(e?b.filter((function(t){return t.id!==e})):b.filter((function(e){return!0!==e.completed})))}(e):e?m(e):_.filter((function(e){return!0===e.completed})).forEach((function(e){return m(e.id)}))},L=function(e,t){var n=b.find((function(t){return t.id===e}));n&&("boolean"===typeof t?n.completed=t:n.title=t,v(b.map((function(t){return t.id===e?n:t}))))},F=function(){"/local"===c?b.every((function(e){return!0===e.completed}))?b.forEach((function(e){return L(e.id,!1)})):b.forEach((function(e){return L(e.id,!0)})):_.every((function(e){return!0===e.completed}))?_.forEach((function(e){return O(e.id,{completed:!1})})):_.forEach((function(e){return O(e.id,{completed:!0})}))};return Object(y.jsxs)(x.Provider,{value:"",children:[Object(y.jsx)(w,{storage:c}),Object(y.jsxs)("div",{className:"todoapp",children:[Object(y.jsxs)("header",{className:"header",children:[Object(y.jsx)("h1",{children:"".concat(c.slice(1)," todos")}),Object(y.jsx)(N,{addTodo:function(e){return"/local"===c?function(e){var t={userId:1,title:e,id:b.length>0?Math.max.apply(Math,Object(l.a)(b.map((function(e){return e.id}))))+1:1,completed:!1};v([t].concat(Object(l.a)(b)))}(e):h({userId:1,title:e,completed:!1})}})]}),Object(y.jsxs)("section",{className:"main",children:[Object(y.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all","data-cy":"toggleAll",onChange:function(){F()}}),Object(y.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(y.jsx)(J,{visibleTodos:D,updateTodo:function(e,t){"/local"===c?L(e,t):O(e,"string"===typeof t?{title:t}:{completed:t})},clear:P})]}),0!==_.length&&Object(y.jsxs)("footer",{className:"footer",children:[Object(y.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:_.length}),Object(y.jsx)(I,{}),Object(y.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){P()},children:"Clear completed"})]})]})]})},D=function(){return Object(y.jsxs)(i.d,{children:[Object(y.jsxs)(i.b,{path:"/",element:Object(y.jsx)(_,{}),children:[Object(y.jsx)(i.b,{index:!0,element:Object(y.jsx)(_,{})}),Object(y.jsx)(i.b,{path:":storage",element:Object(y.jsx)(_,{})})]}),Object(y.jsx)(i.b,{path:"home",element:Object(y.jsx)(i.a,{to:"/"})}),Object(y.jsx)(i.b,{path:"*",element:Object(y.jsx)("p",{children:"Page not found"})})]})};n(23),n(24),n(25);r.a.render(Object(y.jsx)(a.a,{children:Object(y.jsx)(D,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.ae572d1c.chunk.js.map