(this["webpackJsonpreact_add-todo-form"]=this["webpackJsonpreact_add-todo-form"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var c=n(12),r=n.n(c),a=n(6),o=n(0),s=n.n(o),i=n(2),u=n(10),l=n(7),d=n(3),j=n(5),f=n.n(j);var b="https://mate.academy/students-api",p=function(){var e=Object(l.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b).concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/todos"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(f.a.mark((function e(t,n){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/todos/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/todos/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=s.a.createContext("local"),v=n(1),g=function(e){var t=e.storage,n=e.setStorage;return Object(v.jsx)("div",{className:"select",children:Object(v.jsxs)("select",{value:t,onChange:function(e){return n(e.target.value)},children:[Object(v.jsx)("option",{value:"local",children:"Local"}),Object(v.jsx)("option",{value:"server",children:"Server"})]})})},y=function(e){var t=e.addTodo,n=Object(o.useState)(""),c=Object(d.a)(n,2),r=c[0],a=c[1];return Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault(),r.length>0&&(t(r),a(""))},children:Object(v.jsx)("input",{type:"text","data-cy":"createTodo",className:"new-todo",placeholder:"What needs to be done?",value:r,onChange:function(e){return a(e.target.value)}})})},w=function(){var e=function(e){return e.isActive?"selected":""};return Object(v.jsxs)("ul",{className:"filters",children:[Object(v.jsx)("li",{children:Object(v.jsx)(a.b,{to:"/",className:e,children:"All"})}),Object(v.jsx)("li",{children:Object(v.jsx)(a.b,{to:"/active",className:e,children:"Active"})}),Object(v.jsx)("li",{children:Object(v.jsx)(a.b,{to:"/completed",className:e,children:"Completed"})})]})},N=n(13),S=n.n(N),k=function(e){var t=e.todo,n=e.updateTodo,c=e.clear,r=Object(o.useState)(t.title),a=Object(d.a)(r,2),s=a[0],i=a[1],u=Object(o.useState)(s),l=Object(d.a)(u,2),j=l[0],f=l[1],b=Object(o.useState)(!1),p=Object(d.a)(b,2),h=p[0],O=p[1],m=function(){f(s),n(t.id,s)};return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("li",{className:S()({completed:t.completed,editing:h}),id:"test",children:[Object(v.jsxs)("div",{className:"view",children:[Object(v.jsx)("input",{type:"checkbox",className:"toggle",id:"toggle-view",checked:t.completed,onChange:function(){n(t.id,!t.completed)}}),Object(v.jsx)("label",{onDoubleClick:function(){return O(!h)},children:j}),Object(v.jsx)("button",{"aria-label":"#toggle-view",type:"button",className:"destroy","data-cy":"deleteTodo",onClick:function(){return c(t.id)}})]}),Object(v.jsx)("input",{type:"text",className:"edit",value:s,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){return"Enter"===(t=e.key)&&(m(),O(!1)),void("Escape"===t&&(i(j),O(!1)));var t},onBlur:function(e){e.preventDefault(),m()}})]})})},T=function(e){var t=e.visibleTodos,n=e.updateTodo,c=e.clear;return Object(v.jsx)("ul",{className:"todo-list","data-cy":"todoList",children:t.map((function(e){return Object(v.jsx)(k,{todo:e,updateTodo:n,clear:c},e.id)}))})},C=function(){var e=Object(o.useState)("local"),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(i.f)().pathname,a=function(e,t){var n=Object(o.useState)((function(){if(void 0===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return t}})),c=Object(d.a)(n,2),r=c[0],a=c[1];return[r,function(t){var n=t instanceof Function?t(r):t;a(n),"undefined"!==typeof window&&window.localStorage.setItem(e,JSON.stringify(t))}]}("todos",[]),s=Object(d.a)(a,2),j=s[0],b=s[1],N=Object(o.useState)([]),S=Object(d.a)(N,2),k=S[0],C=S[1],E=function(){var e=Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("/todos").then(C);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var e=setInterval(E,1e3);return function(){return clearInterval(e)}}),[]),Object(o.useEffect)((function(){E()}),[]);var I="local"===n?j:k,J=Object(u.a)(I).filter((function(e){switch(r){case"/active":return!1===e.completed;case"/completed":return!0===e.completed;default:return!0}})),A=function(e){"local"===n?function(e){b(e?j.filter((function(t){return t.id!==e})):j.filter((function(e){return!0!==e.completed})))}(e):e?m(e):I.filter((function(e){return!0===e.completed})).forEach((function(e){return m(e.id)}))},D=function(e,t){var n=j.find((function(t){return t.id===e}));n&&("boolean"===typeof t?n.completed=t:n.title=t,b(j.map((function(t){return t.id===e?n:t}))))},P=function(){"local"===n?j.every((function(e){return!0===e.completed}))?j.forEach((function(e){return D(e.id,!1)})):j.forEach((function(e){return D(e.id,!0)})):I.every((function(e){return!0===e.completed}))?I.forEach((function(e){return O(e.id,{completed:!1})})):I.forEach((function(e){return O(e.id,{completed:!0})}))};return Object(v.jsxs)(x.Provider,{value:"",children:[Object(v.jsx)(g,{storage:n,setStorage:c}),Object(v.jsxs)("div",{className:"todoapp",children:[Object(v.jsxs)("header",{className:"header",children:[Object(v.jsx)("h1",{children:"todos"}),Object(v.jsx)(y,{addTodo:function(e){return"local"===n?function(e){var t={userId:1,title:e,id:j.length>0?Math.max.apply(Math,Object(u.a)(j.map((function(e){return e.id}))))+1:1,completed:!1};b([t].concat(Object(u.a)(j)))}(e):h({userId:1,title:e,completed:!1})}})]}),Object(v.jsxs)("section",{className:"main",children:[Object(v.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all","data-cy":"toggleAll",onChange:function(){P()}}),Object(v.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(v.jsx)(T,{visibleTodos:J,updateTodo:function(e,t){"local"===n?D(e,t):O(e,"string"===typeof t?{title:t}:{completed:t})},clear:A})]}),Object(v.jsxs)("footer",{className:"footer",children:[Object(v.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:I.length}),Object(v.jsx)(w,{}),Object(v.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){A()},children:"Clear completed"})]})]})]})},E=function(){return Object(v.jsxs)(i.d,{children:[Object(v.jsxs)(i.b,{path:"/",children:[Object(v.jsx)(i.b,{index:!0,element:Object(v.jsx)(C,{})}),Object(v.jsx)(i.b,{path:"active",element:Object(v.jsx)(C,{})}),Object(v.jsx)(i.b,{path:"completed",element:Object(v.jsx)(C,{})})]}),Object(v.jsx)(i.b,{path:"home",element:Object(v.jsx)(i.a,{to:"/"})}),Object(v.jsx)(i.b,{path:"*",element:Object(v.jsx)("p",{children:"Page not found"})})]})};n(20),n(21),n(22);r.a.render(Object(v.jsx)(a.a,{children:Object(v.jsx)(E,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.ee494af7.chunk.js.map