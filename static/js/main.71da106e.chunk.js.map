{"version":3,"sources":["Utilits/ServerStroage/ServerStorageAPI.ts","Utilits/StorageContext.tsx","Components/StorageSelector/StorageSelector.tsx","Components/TodoAdd/TodoAdd.tsx","Utilits/MagicHelper.tsx","Utilits/SearchLink.tsx","Components/TodoFilters/TodosFilter.tsx","Components/TodoItem/TodoItem.tsx","Components/TodoList/TodoList.tsx","Components/TodoApp/TodoApp.tsx","Utilits/LocalStorage/LocalStorageAPI.ts","App.tsx","index.tsx"],"names":["BASE_URL","request","url","a","fetch","response","ok","Error","status","statusText","json","addTodoServer","todo","method","headers","body","JSON","stringify","updateTodoServer","todoId","valuesToChange","deleteTodoServer","StorageContext","React","createContext","StorageSelector","storage","setStorage","curentUrl","URL","document","pathname","slice","history","createBrowserHistory","className","value","onChange","e","push","target","selected","TodoAdd","addTodo","useState","title","setTitle","onSubmit","event","preventDefault","trim","length","type","placeholder","getSearchRequest","currentSearch","prevSearch","newSearch","URLSearchParams","toString","Object","entries","forEach","key","delete","Array","isArray","part","append","set","SearchLink","children","params","props","useSearchParams","searchParams","to","search","TodosFilters","completed","get","classNames","TodoItem","updateTodo","clear","query","setQuery","prevQuery","setprevQuery","onEdit","setOnEdit","applyTitle","id","editing","checked","onDoubleClick","onClick","onKeyDown","onBlur","TodoList","visibleTodos","map","TodoApp","initalValue","undefined","window","item","localStorage","getItem","parse","storedValue","setValue","itemToSave","Function","setItem","useLocalStorage","localTodos","setLocalTodos","serverTodos","setServerTodos","updateServer","then","useEffect","timer","setInterval","clearInterval","usedTodos","filter","deleteTodo","deleteTodoLocal","onDeleteTodo","updateTodoLocal","changetTodo","find","MarkAll","every","Provider","newTodo","userId","Math","max","addTodoLocal","htmlFor","App","path","index","element","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.71da106e.chunk.js","sourcesContent":["export const BASE_URL = 'https://mate.academy/students-api';\n\nexport const request = async (url: string) => {\n  const response = await fetch(`${BASE_URL}${url}`);\n\n  if (!response.ok) {\n    throw new Error(`${response.status} - ${response.statusText}`);\n  }\n\n  return response.json();\n};\n\nexport const getTodos = () => (request('/todos'));\n\nexport const addTodoServer = async (todo:{}) => {\n  const response = await fetch(`${BASE_URL}/todos`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8',\n    },\n    body: JSON.stringify(\n      todo,\n    ),\n  });\n\n  return response.json();\n};\n\nexport const updateTodoServer = async (\n  todoId: number,\n  valuesToChange: {},\n) => {\n  const response = await fetch(`${BASE_URL}/todos/${todoId}`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json;charset=utf-8',\n    },\n    body: JSON.stringify(valuesToChange),\n  });\n\n  return response.json();\n};\n\nexport const deleteTodoServer = async (\n  todoId: number,\n) => {\n  const response = await fetch(`${BASE_URL}/todos/${todoId}`, { method: 'DELETE' });\n\n  return response.json();\n};\n","import React from 'react';\n\nexport const StorageContext = React.createContext('local');\n","import { createBrowserHistory } from 'history';\n/* import { useLocation } from 'react-router-dom'; */\n\ntype Props = {\n  storage: string\n  setStorage: (value: string) => void\n};\n\nexport const StorageSelector: React.FC<Props> = ({ storage, setStorage }) => {\n  const curentUrl = new URL(document.URL).pathname.slice(1);\n  const history = createBrowserHistory();\n  const changeStorage = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    history.push(`${e.target.value}`);\n    setStorage(e.target.value);\n  };\n\n  return (\n    <div className=\"select\">\n      <select\n        value={storage}\n        onChange={changeStorage}\n      >\n        <option\n          value=\"local\"\n          selected={curentUrl === 'local'}\n        >\n          Local\n        </option>\n        <option\n          value=\"server\"\n          selected={curentUrl === 'server'}\n        >\n          Server\n        </option>\n      </select>\n    </div>\n  );\n};\n","import { useState } from 'react';\n\ntype Props = {\n  addTodo: (value: string) => void\n};\n\nexport const TodoAdd: React.FC<Props> = ({ addTodo }) => {\n  const [title, setTitle] = useState('');\n\n  const onAdd = (event: React.FormEvent) => {\n    event.preventDefault();\n    if (title.trim().length > 0) {\n      addTodo(title);\n      setTitle('');\n    }\n  };\n\n  return (\n    <form onSubmit={onAdd}>\n      <input\n        type=\"text\"\n        data-cy=\"createTodo\"\n        className=\"new-todo\"\n        placeholder=\"What needs to be done?\"\n        value={title}\n        onChange={event => setTitle(event.target.value)}\n      />\n    </form>\n  );\n};\n","export type SearchParams = {\n  [key: string]: string | string[] | null,\n};\n\nexport function getSearchRequest(\n  currentSearch: URLSearchParams,\n  prevSearch: SearchParams,\n): string {\n  const newSearch = new URLSearchParams(currentSearch.toString());\n\n  Object.entries(prevSearch)\n    .forEach(([key, value]) => {\n      if (value === null) {\n        newSearch.delete(key);\n      } else if (Array.isArray(value)) {\n        newSearch.delete(key);\n        value.forEach(part => {\n          newSearch.append(key, part);\n        });\n      } else {\n        newSearch.set(key, value);\n      }\n    });\n\n  return newSearch.toString();\n}\n","import { Link, LinkProps, useSearchParams } from 'react-router-dom';\nimport { getSearchRequest, SearchParams } from './MagicHelper';\n\ntype Props = Omit<LinkProps, 'to'> & {\n  params: SearchParams,\n};\n\nexport const SearchLink: React.FC<Props> = ({\n  children,\n  params,\n  ...props\n}) => {\n  const [searchParams] = useSearchParams();\n\n  return (\n    <Link\n      to={{\n        search: getSearchRequest(searchParams, params),\n      }}\n      {...props}\n    >\n      {children}\n    </Link>\n  );\n};\n","import classNames from 'classnames';\nimport React from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { SearchLink } from '../../Utilits/SearchLink';\n\nexport const TodosFilters: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const completed = searchParams.get('completed');\n\n  return (\n    <ul className=\"filters\">\n      <li>\n        <SearchLink\n          params={{ completed: null }}\n          className={classNames({ selected: !completed })}\n        >\n          All\n        </SearchLink>\n      </li>\n\n      <li>\n        <SearchLink\n          params={{ completed: 'active' }}\n          className={classNames({ selected: completed === 'active' })}\n        >\n          Active\n        </SearchLink>\n      </li>\n\n      <li>\n        <SearchLink\n          params={{ completed: 'completed' }}\n          className={classNames({ selected: completed === 'completed' })}\n        >\n          Completed\n        </SearchLink>\n      </li>\n    </ul>\n  );\n};\n","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport { Todo } from '../../Types/Todo';\n\ntype Props = {\n  todo: Todo\n  updateTodo: (id: number, value: string | boolean) => void\n  clear: (id: number) => void\n};\n\nexport const TodoItem: React.FC<Props> = ({\n  todo,\n  updateTodo,\n  clear,\n}) => {\n  const [query, setQuery] = useState(todo.title);\n  const [prevQuery, setprevQuery] = useState(query);\n  const [onEdit, setOnEdit] = useState(false);\n\n  const applyTitle = () => {\n    if (query.trim().length === 0) {\n      clear(todo.id);\n    } else {\n      setprevQuery(query);\n      updateTodo(todo.id, query);\n    }\n  };\n\n  const editTitle = (key: string) => {\n    if (key === 'Enter') {\n      applyTitle();\n      setOnEdit(false);\n    }\n\n    if (key === 'Escape') {\n      setQuery(prevQuery);\n      setOnEdit(false);\n    }\n  };\n\n  return (\n    <>\n      <li\n        className={classNames({ completed: todo.completed, editing: onEdit })}\n        id=\"test\"\n      >\n        <div className=\"view\">\n          <input\n            type=\"checkbox\"\n            className=\"toggle\"\n            id=\"toggle-view\"\n            checked={todo.completed}\n            onChange={() => {\n              updateTodo(todo.id, !todo.completed);\n            }}\n          />\n          <label\n            onDoubleClick={() => setOnEdit(!onEdit)}\n          >\n            {prevQuery}\n          </label>\n          <button\n            aria-label=\"#toggle-view\"\n            type=\"button\"\n            className=\"destroy\"\n            data-cy=\"deleteTodo\"\n            onClick={() => clear(todo.id)}\n          />\n        </div>\n        <input\n          type=\"text\"\n          className=\"edit\"\n          value={query}\n          onChange={(event) => setQuery(event.target.value)}\n          onKeyDown={(event => editTitle(event.key))}\n          onBlur={(event) => {\n            event.preventDefault();\n            applyTitle();\n          }}\n        />\n      </li>\n    </>\n  );\n};\n","import { Todo } from '../../Types/Todo';\nimport { TodoItem } from '../TodoItem/TodoItem';\n\ntype Props = {\n  visibleTodos: Todo[]\n  updateTodo: (id: number, value: string | boolean) => void\n  clear: (id: number) => void\n};\n\nexport const TodoList: React.FC<Props> = ({\n  visibleTodos,\n  updateTodo,\n  clear,\n}) => {\n  return (\n    <ul className=\"todo-list\" data-cy=\"todoList\">\n      {visibleTodos.map(todo => (\n        <TodoItem\n          todo={todo}\n          key={todo.id}\n          updateTodo={updateTodo}\n          clear={clear}\n        />\n      ))}\n    </ul>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { Todo } from '../../Types/Todo';\nimport { useLocalStorage } from '../../Utilits/LocalStorage/LocalStorageAPI';\nimport {\n  addTodoServer,\n  deleteTodoServer,\n  getTodos,\n  updateTodoServer,\n} from '../../Utilits/ServerStroage/ServerStorageAPI';\nimport { StorageContext } from '../../Utilits/StorageContext';\nimport { StorageSelector } from '../StorageSelector/StorageSelector';\nimport { TodoAdd } from '../TodoAdd/TodoAdd';\nimport { TodosFilters } from '../TodoFilters/TodosFilter';\nimport { TodoList } from '../TodoList/TodoList';\n\nexport const TodoApp: React.FC = () => {\n  const curentUrl = new URL(document.URL).pathname.slice(1);\n  const [storage, setStorage] = useState(curentUrl);\n  const [localTodos, setLocalTodos] = useLocalStorage<Todo[]>('todos', []);\n  const [serverTodos, setServerTodos] = useState<Todo[]>([]);\n  const [searchParams] = useSearchParams();\n  const completed = searchParams.get('completed');\n  const updateServer = async () => {\n    getTodos().then(setServerTodos);\n  };\n\n  useEffect(() => {\n    const timer = setInterval(updateServer, 500);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  useEffect(() => {\n    updateServer();\n  },\n  []);\n\n  const usedTodos = storage === 'local' ? localTodos : serverTodos;\n  const visibleTodos = [...usedTodos].filter(todo => {\n    switch (completed) {\n      case 'active':\n        return todo.completed === false;\n      case 'completed':\n        return todo.completed === true;\n\n      default:\n        return true;\n    }\n  });\n\n  const addTodoLocal = (title: string) => {\n    const newTodo = {\n      userId: 1,\n      title,\n      id: localTodos.length > 0\n        ? Math.max(...localTodos.map(todo => todo.id)) + 1\n        : 1,\n      completed: false,\n    };\n\n    setLocalTodos([newTodo, ...localTodos]);\n  };\n\n  const addTodo = (value: string) => {\n    if (storage === 'local') {\n      return addTodoLocal(value);\n    }\n\n    return addTodoServer(\n      {\n        userId: 1,\n        title: value,\n        completed: false,\n      },\n    );\n  };\n\n  const deleteTodoLocal = (value?: number) => {\n    if (!value) {\n      setLocalTodos(localTodos.filter(todo => todo.completed !== true));\n    } else {\n      setLocalTodos(localTodos.filter(todo => todo.id !== value));\n    }\n  };\n\n  const deleteTodo = (value? : number) => {\n    if (storage === 'local') {\n      deleteTodoLocal(value);\n    } else if (value) {\n      deleteTodoServer(value);\n    } else {\n      usedTodos.filter(todo => todo.completed === true)\n        .forEach(onDeleteTodo => deleteTodoServer(onDeleteTodo.id));\n    }\n  };\n\n  const updateTodoLocal = (id: number, value: string | boolean) => {\n    const changetTodo = localTodos.find(todo => todo.id === id);\n\n    if (!changetTodo) {\n      return;\n    }\n\n    if (typeof value === 'boolean') {\n      changetTodo.completed = value;\n    } else {\n      changetTodo.title = value;\n    }\n\n    setLocalTodos(localTodos.map(todo => {\n      if (todo.id === id) {\n        return changetTodo;\n      }\n\n      return todo;\n    }));\n  };\n\n  const updateTodo = (id: number, value: string | boolean) => {\n    if (storage === 'local') {\n      updateTodoLocal(id, value);\n    } else {\n      const updatedValue = typeof value === 'string'\n        ? { title: value }\n        : { completed: value };\n\n      updateTodoServer(id, updatedValue);\n    }\n  };\n\n  const localeMarkAllTodo = () => {\n    if (localTodos.every(todo => todo.completed === true)) {\n      localTodos.forEach(todo => updateTodoLocal(todo.id, false));\n    } else {\n      localTodos.forEach(todo => updateTodoLocal(todo.id, true));\n    }\n  };\n\n  const MarkAll = () => {\n    if (storage === 'local') {\n      localeMarkAllTodo();\n    } else if (usedTodos.every(todo => todo.completed === true)) {\n      usedTodos\n        .forEach(todo => updateTodoServer(todo.id, { completed: false }));\n    } else {\n      usedTodos.forEach(todo => updateTodoServer(todo.id, { completed: true }));\n    }\n  };\n\n  return (\n    <StorageContext.Provider value=\"\">\n      <StorageSelector storage={storage} setStorage={setStorage} />\n      <div className=\"todoapp\">\n        <header className=\"header\">\n          <h1>{`${storage} todos`}</h1>\n          <TodoAdd addTodo={addTodo} />\n        </header>\n\n        <section className=\"main\">\n          <input\n            type=\"checkbox\"\n            id=\"toggle-all\"\n            className=\"toggle-all\"\n            data-cy=\"toggleAll\"\n            onChange={() => {\n              MarkAll();\n            }}\n          />\n          <label htmlFor=\"toggle-all\">Mark all as complete</label>\n\n          <TodoList\n            visibleTodos={visibleTodos}\n            updateTodo={updateTodo}\n            clear={deleteTodo}\n          />\n        </section>\n        {usedTodos.length !== 0\n        && (\n          <footer className=\"footer\">\n            <span className=\"todo-count\" data-cy=\"todosCounter\">\n              {usedTodos.length}\n            </span>\n            <TodosFilters />\n            <button\n              type=\"button\"\n              className=\"clear-completed\"\n              onClick={() => {\n                deleteTodo();\n              }}\n            >\n              Clear completed\n            </button>\n          </footer>\n        )}\n\n      </div>\n    </StorageContext.Provider>\n  );\n};\n","import { useState } from 'react';\n\nexport function useLocalStorage<T>(key: string, initalValue: T) {\n  const [storedValue, setValue] = useState<T>(() => {\n    if (typeof window === undefined) {\n      return initalValue;\n    }\n\n    try {\n      const item = window.localStorage.getItem(key);\n\n      return item ? JSON.parse(item) : initalValue;\n    } catch {\n      return initalValue;\n    }\n  });\n\n  const saveToLS = (item: T | ((item: T) => T)) => {\n    const itemToSave = item instanceof Function ? item(storedValue) : item;\n\n    setValue(itemToSave);\n\n    if (typeof window !== 'undefined') {\n      window.localStorage.setItem(key, JSON.stringify(item));\n    }\n  };\n\n  return [storedValue, saveToLS] as const;\n}\n","import React from 'react';\nimport { Navigate, Route, Routes } from 'react-router-dom/';\nimport { TodoApp } from './Components/TodoApp/TodoApp';\n\nexport const App: React.FC = () => {\n  return (\n    <Routes>\n      <Route path=\"/\">\n        <Route index element={<TodoApp />} />\n        <Route path=\"/local\" element={<TodoApp />} />\n        <Route path=\"/server\" element={<TodoApp />} />\n      </Route>\n      <Route path=\"home\" element={<Navigate to=\"/\" />} />\n      <Route path=\"*\" element={<p>Page not found</p>} />\n    </Routes>\n  );\n};\n","import ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport { App } from './App';\n\nimport './styles/index.css';\nimport './styles/todo-list.css';\nimport './styles/filters.css';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}